"use strict";(self.webpackChunkmy_modern_app=self.webpackChunkmy_modern_app||[]).push([[128],{80879:(e,t,r)=>{r.d(t,{Fc:()=>v,TN:()=>m,XL:()=>h});var n=r(57801),s=r(66697),a=r(79474),i=r(64909),c=r(40906),l=r(13274);const o=["className","variant"],d=["className"],u=["className"],f=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),v=a.forwardRef(((e,t)=>{let{className:r,variant:a}=e,i=(0,s.A)(e,o);return(0,l.jsx)("div",(0,n.A)({ref:t,role:"alert",className:(0,c.cn)(f({variant:a}),r)},i))}));v.displayName="Alert";const h=a.forwardRef(((e,t)=>{let{className:r}=e,a=(0,s.A)(e,d);return(0,l.jsx)("h5",(0,n.A)({ref:t,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",r)},a))}));h.displayName="AlertTitle";const m=a.forwardRef(((e,t)=>{let{className:r}=e,a=(0,s.A)(e,u);return(0,l.jsx)("div",(0,n.A)({ref:t,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",r)},a))}));m.displayName="AlertDescription"},43887:(e,t,r)=>{r.r(t);var n=r(52235),s=r(79474),a=r(80879),i=r(13274);function c(e){return l.apply(this,arguments)}function l(){return(l=(0,n.A)((function*(e){return new Promise(((t,r)=>{const n=new Image;n.src=e,n.onload=()=>{t(n)},n.onerror=e=>{r(e)}}))}))).apply(this,arguments)}function o(e){return 2*e}const d=[{type:"text",text:"\u6d4b\u8bd5\u6c34\u5370",x:10,y:10,color:"#000",fontSize:20}];t.default=function(){const[e,t]=(0,s.useState)({isUse:!1,track:null,isUseTorch:!1,trackStatus:!1}),[r,l]=(0,s.useState)(""),u=(0,s.useRef)(null),f=(0,s.useRef)(null),v=(0,s.useRef)(null),h=(0,s.useRef)(null),m=(0,s.useRef)(null),g=(0,s.useRef)(null),[p,x]=(0,s.useState)("environment"),b=()=>{var e;null!==(e=u.current)&&void 0!==e&&e.srcObject&&u.current.srcObject.getTracks().forEach((e=>{e.stop()}))},j=function(){var e=(0,n.A)((function*(e){if(0!==d.length)for(const t of d)switch(t.type){case"img":{const[r,{path:n}]=[!1,{path:""}];if(r)throw new Error(`${t.url} \u6ca1\u6709\u627e\u5230`);const s=yield c(n);e.drawImage(s,t.x,t.y,t.width||0,t.height||0);break}case"text":{const r=t.color||"#000",n=t.fontSize||16;e.fillStyle=r,e.font=`${n}px normal`,(null==t?void 0:t.text)&&e.fillText(t.text,t.x,t.y);break}}}));return function(t){return e.apply(this,arguments)}}(),w=()=>{const r=o(document.documentElement.clientWidth||document.body.clientWidth),n=o(document.documentElement.clientHeight||document.body.clientHeight),s={audio:!1,video:{aspectRatio:r/n,facingMode:p,width:r,height:n}};navigator.mediaDevices.getUserMedia(s).then((r=>{if(u.current){u.current.srcObject=r,u.current.setAttribute("playsinline","true"),u.current.setAttribute("webkit-playsinline","true"),u.current.play(),j(m.current);const n=r.getVideoTracks()[0];console.log("Constraints",n.getConstraints()),console.log("Capabilities",n.getCapabilities()),console.log("Settings",n.getSettings()),t({isUse:!0,track:r.getVideoTracks()[0]}),setTimeout((()=>{var r;t({isUseTorch:(null===(r=e.track)||void 0===r||null===(r=r.getCapabilities())||void 0===r?void 0:r.torch)||!1})}),500)}})).catch((e=>{console.error("\u8bbe\u5907\u4e0d\u652f\u6301",e)}))};return(0,s.useEffect)((()=>{var e;("https:"!==location.protocol&&console.error("\u8bf7\u4f7f\u7528https\u534f\u8bae"),v.current&&(m.current=v.current.getContext("2d")),h.current)&&(g.current=null===(e=h.current)||void 0===e?void 0:e.getContext("2d"));return w(),()=>{b()}}),[]),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{ref:f,className:"relative",children:[(0,i.jsx)("div",{className:"fixed top-2 right-2 p-2 z-20",onClick:()=>{x((e=>"environment"===e?"user":"environment")),b(),w()},children:"Switch"}),(0,i.jsx)("div",{className:"trach-box",onClick:()=>{t((e=>({trackStatus:!e.trackStatus})))},children:"trach"}),r&&(0,i.jsx)("img",{className:"fixed top-0 left-0 z-20",src:r,alt:""}),(0,i.jsx)("div",{className:"fixed bottom-0 left-0 w-screen flex items-center justify-center bg-transparent z-40",children:(0,i.jsx)("a",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-900 text-white",onClick:()=>{var e,t,r,n;null===(e=g.current)||void 0===e||e.drawImage(u.current,0,0,null===(t=u.current)||void 0===t?void 0:t.videoWidth,null===(r=u.current)||void 0===r?void 0:r.videoHeight);const s=null===(n=h.current)||void 0===n?void 0:n.toDataURL("image/png");l(s)},children:"\u62cd"})}),(0,i.jsx)("video",{ref:u,className:"w-screen h-screen"}),(0,i.jsx)("canvas",{ref:v,id:"canvas",className:"w-screen h-screen fixed left-0 top-0"}),(0,i.jsx)("canvas",{ref:h,id:"camera-canvas",className:"w-screen h-full hidden"})]}),(0,i.jsx)(a.Fc,{children:(0,i.jsxs)("dl",{children:[(0,i.jsx)("dt",{children:"\u76f8\u673a\u6743\u9650\u88ab\u62d2\u7edd\uff0c\u8bf7\u5c1d\u8bd5\u5982\u4e0b\u64cd\u4f5c\uff1a"}),(0,i.jsx)("dd",{children:"\u5237\u65b0\u9875\u9762\u540e\u91cd\u8bd5\uff1b"}),(0,i.jsx)("dd",{children:"\u5728\u7cfb\u7edf\u4e2d\u68c0\u6d4b\u5f53\u524dApp\u6216\u6d4f\u89c8\u5668\u7684\u76f8\u673a\u6743\u9650\u662f\u5426\u88ab\u7981\u7528\uff1b"}),(0,i.jsx)("dd",{children:"\u5982\u679c\u4f9d\u7136\u4e0d\u80fd\u4f53\u9a8c\uff0c\u5efa\u8bae\u5728\u5fae\u4fe1\u4e2d\u6253\u5f00\u94fe\u63a5\uff1b"})]})})]})}}}]);